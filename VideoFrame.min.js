!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeVideoFrame=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("Can't export constructor; this environment was not anticipated by VideoFrame.");var t="undefined"!=typeof window?window:self,r=t.VideoFrame,o=t.FrameRates,i=e();t.VideoFrame=i.VideoFrame,t.FrameRates=i.FrameRates,t.VideoFrame.noConflict=function(){return t.VideoFrame=r,t.FrameRates=o,this}}}((function(){var e=function(t){if(this===window)return new e(t);this.obj=t||{},this.frameRate=this.obj.frameRate||24,this.video=document.getElementById(this.obj.id)||document.getElementsByTagName("video")[0]},t={film:24,NTSC:29.97,NTSC_Film:23.98,NTSC_HD:59.94,PAL:25,PAL_HD:50,web:30,high:60};return e.prototype={get:function(){return Math.floor(this.video.currentTime.toFixed(5)*this.frameRate)},listen:function(e,t){var r=this;e?this.interval=setInterval((function(){if(!r.video.paused&&!r.video.ended){var t="SMPTE"===e?r.toSMPTE():"time"===e?r.toTime():r.get();return r.obj.callback&&r.obj.callback(t,e),t}}),t||1e3/r.frameRate/2):console.log("VideoFrame: Error - The listen method requires the format parameter.")},stopListen:function(){clearInterval(this.interval)},fps:t},e.prototype.toTime=function(e){var t="number"!=typeof e?this.video.currentTime:e,r=this.frameRate,o=new Date,i="hh:mm:ss"+("number"==typeof e?":ff":"");function s(e){return e<10?"0"+e:e}return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(1e3*t),i.replace(/hh|mm|ss|ff/g,(function(e){switch(e){case"hh":return s(o.getHours()<13?o.getHours():o.getHours()-12);case"mm":return s(o.getMinutes());case"ss":return s(o.getSeconds());case"ff":return s(Math.floor(t%1*r))}}))},e.prototype.toSMPTE=function(e){if(!e)return this.toTime(this.video.currentTime);var t=Number(e),r=this.frameRate;function o(e){return e<10?"0"+e:e}var i=60*r*60,s=60*r,n=Math.floor(t/i).toFixed(0),a=Number((t/s).toString().split(".")[0])%60,u=Number((t/r).toString().split(".")[0])%60;return o(n)+":"+o(a)+":"+o(u)+":"+o(t%r)},e.prototype.toSeconds=function(e){if(!e)return Math.floor(this.video.currentTime);var t=e.split(":");return 60*Number(t[0])*60+60*Number(t[1])+Number(t[2])},e.prototype.toMilliseconds=function(e){var t=Number(e?e.split(":")[3]:this.toSMPTE().split(":")[3]),r=1e3/this.frameRate*(isNaN(t)?0:t);return Math.floor(1e3*this.toSeconds(e)+r)},e.prototype.toFrames=function(e){var t=e?e.split(":"):this.toSMPTE().split(":"),r=this.frameRate,o=60*Number(t[0])*60*r,i=60*Number(t[1])*r,s=Number(t[2])*r,n=Number(t[3]);return Math.floor(o+i+s+n)},e.prototype.__seek=function(e,t){this.video.paused||this.video.pause();var r=Number(this.get());this.video.currentTime=("backward"===e?r-t:r+t)/this.frameRate+1e-5},e.prototype.seekForward=function(e,t){return e||(e=1),this.__seek("forward",Number(e)),!t||t()},e.prototype.seekBackward=function(e,t){return e||(e=1),this.__seek("backward",Number(e)),!t||t()},e.prototype.seekTo=function(e){var t,r,o=e||{},i=Object.keys(o)[0];if("SMPTE"==i||"time"==i)return r=o[i],t=this.toMilliseconds(r)/1e3+.001,void(this.video.currentTime=t);switch(i){case"frame":r=this.toSMPTE(o[i]),t=this.toMilliseconds(r)/1e3+.001;break;case"seconds":t=Number(o[i]);break;case"milliseconds":t=Number(o[i])/1e3+.001}isNaN(t)||(this.video.currentTime=t)},{VideoFrame:e,FrameRates:t}}));
